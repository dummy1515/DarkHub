-- Services
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local Lighting = game:GetService("Lighting")
local player = Players.LocalPlayer

-- GUI Setup
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "DarkSpawnerUI"
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.ResetOnSpawn = false
ScreenGui.IgnoreGuiInset = true
ScreenGui.Parent = player:WaitForChild("PlayerGui")

-- Fullscreen Black Screen
local FakeScreen = Instance.new("Frame")
FakeScreen.Size = UDim2.new(1, 0, 1, 0)
FakeScreen.BackgroundColor3 = Color3.new(0, 0, 0)
FakeScreen.BackgroundTransparency = 0
FakeScreen.Visible = false
FakeScreen.ZIndex = 1000
FakeScreen.Parent = ScreenGui

local Blur = Instance.new("BlurEffect")
Blur.Size = 0
Blur.Parent = Lighting

local LoadingText = Instance.new("TextLabel")
LoadingText.Text = "LOADING SPAWNER..."
LoadingText.Font = Enum.Font.SourceSansBold
LoadingText.TextSize = 32
LoadingText.TextColor3 = Color3.fromRGB(255, 255, 255)
LoadingText.BackgroundTransparency = 1
LoadingText.Position = UDim2.new(0.5, -150, 0.5, -20)
LoadingText.Size = UDim2.new(0, 300, 0, 40)
LoadingText.TextXAlignment = Enum.TextXAlignment.Center
LoadingText.Visible = true
LoadingText.ZIndex = 1001
LoadingText.Parent = FakeScreen

coroutine.wrap(function()
	while true do
		for _, v in ipairs({1, 0}) do
			LoadingText.TextTransparency = v
			wait(0.5)
		end
	end
end)()

-- Main Frame
local MainFrame = Instance.new("Frame")
MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
MainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
MainFrame.Size = UDim2.new(0.6, 0, 0.4, 0)
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
MainFrame.BorderSizePixel = 0
MainFrame.Parent = ScreenGui

-- TopBar
local TopBar = Instance.new("Frame")
TopBar.Size = UDim2.new(1, 0, 0.12, 0)
TopBar.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
TopBar.BorderSizePixel = 0
TopBar.Parent = MainFrame

-- Title
local Title = Instance.new("TextLabel")
Title.Text = "Dark Spawner"
Title.Font = Enum.Font.SourceSansSemibold
Title.TextSize = 18
Title.TextColor3 = Color3.fromRGB(240, 240, 240)
Title.BackgroundTransparency = 1
Title.Position = UDim2.new(0, 10, 0, 0)
Title.Size = UDim2.new(0.7, 0, 1, 0)
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Parent = TopBar

-- Close Button (clear, small, with animated hover + glow)
local CloseButton = Instance.new("TextButton")
CloseButton.Text = "✕"
CloseButton.Font = Enum.Font.SourceSansBold
CloseButton.TextSize = 14
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.BackgroundTransparency = 1
CloseButton.Size = UDim2.new(0, 20, 0, 20)
CloseButton.Position = UDim2.new(1, -25, 0, 5)
CloseButton.ZIndex = 5
CloseButton.Parent = TopBar

local UIStroke = Instance.new("UIStroke")
UIStroke.Color = Color3.fromRGB(255, 255, 255)
UIStroke.Thickness = 1
UIStroke.Transparency = 1
UIStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
UIStroke.Parent = CloseButton

local UIScale = Instance.new("UIScale")
UIScale.Scale = 1
UIScale.Parent = CloseButton

local hoverTweenIn = TweenService:Create(UIScale, TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Scale = 1.15})
local hoverTweenOut = TweenService:Create(UIScale, TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Scale = 1})

CloseButton.MouseEnter:Connect(function()
	TweenService:Create(UIStroke, TweenInfo.new(0.15), {Transparency = 0}):Play()
	hoverTweenIn:Play()
end)

CloseButton.MouseLeave:Connect(function()
	TweenService:Create(UIStroke, TweenInfo.new(0.15), {Transparency = 1}):Play()
	hoverTweenOut:Play()
end)

CloseButton.MouseButton1Click:Connect(function()
	ScreenGui.Enabled = false
end)

-- Dragging
if not UserInputService.TouchEnabled then
	local dragging, dragInput, dragStart, startPos
	TopBar.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = true
			dragStart = input.Position
			startPos = MainFrame.Position
			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then dragging = false end
			end)
		end
	end)
	TopBar.InputChanged:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseMovement then dragInput = input end
	end)
	UserInputService.InputChanged:Connect(function(input)
		if dragging and input == dragInput then
			local delta = input.Position - dragStart
			MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
		end
	end)
end

-- Toggle with RightShift
UserInputService.InputBegan:Connect(function(input, gpe)
	if not gpe and input.KeyCode == Enum.KeyCode.RightShift then
		MainFrame.Visible = not MainFrame.Visible
	end
end)

-- Spawner Area
local Body = Instance.new("Frame")
Body.Size = UDim2.new(0.9, 0, 0.7, 0)
Body.Position = UDim2.new(0.05, 0, 0.2, 0)
Body.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Body.BorderSizePixel = 0
Body.Parent = MainFrame

local Label = Instance.new("TextLabel")
Label.Text = "Pet & Seed Spawner  |  New Update"
Label.Font = Enum.Font.SourceSansSemibold
Label.TextSize = 16
Label.TextColor3 = Color3.fromRGB(255, 255, 255)
Label.BackgroundTransparency = 1
Label.Size = UDim2.new(1, 0, 0.2, 0)
Label.TextXAlignment = Enum.TextXAlignment.Center
Label.Parent = Body

local DupeButton = Instance.new("TextButton")
DupeButton.Text = "Generate Dupe Script"
DupeButton.Font = Enum.Font.SourceSansBold
DupeButton.TextSize = 14
DupeButton.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
DupeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
DupeButton.Size = UDim2.new(1, 0, 0.2, 0)
DupeButton.Position = UDim2.new(0, 0, 0.25, 0)
DupeButton.Parent = Body

DupeButton.MouseEnter:Connect(function()
	TweenService:Create(DupeButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(0, 140, 220)}):Play()
end)
DupeButton.MouseLeave:Connect(function()
	TweenService:Create(DupeButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(0, 170, 255)}):Play()
end)
DupeButton.MouseButton1Down:Connect(function()
	TweenService:Create(DupeButton, TweenInfo.new(0.1), {BackgroundColor3 = Color3.fromRGB(0, 100, 180)}):Play()
end)
DupeButton.MouseButton1Up:Connect(function()
	TweenService:Create(DupeButton, TweenInfo.new(0.1), {BackgroundColor3 = Color3.fromRGB(0, 140, 220)}):Play()
end)

-- Loading Bar
local LoadingBarBack = Instance.new("Frame")
LoadingBarBack.Size = UDim2.new(1, 0, 0.08, 0)
LoadingBarBack.Position = UDim2.new(0, 0, 0.48, 0)
LoadingBarBack.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
LoadingBarBack.BorderSizePixel = 0
LoadingBarBack.Parent = Body

local LoadingBarFill = Instance.new("Frame")
LoadingBarFill.Size = UDim2.new(0, 0, 1, 0)
LoadingBarFill.BackgroundColor3 = Color3.fromRGB(0, 200, 255)
LoadingBarFill.BorderSizePixel = 0
LoadingBarFill.ClipsDescendants = true
LoadingBarFill.Parent = LoadingBarBack

local Shine = Instance.new("Frame")
Shine.Size = UDim2.new(0.2, 0, 1, 0)
Shine.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Shine.BackgroundTransparency = 0.5
Shine.Position = UDim2.new(-0.2, 0, 0, 0)
Shine.Parent = LoadingBarFill

coroutine.wrap(function()
	while true do
		Shine.Position = UDim2.new(-0.2, 0, 0, 0)
		TweenService:Create(Shine, TweenInfo.new(1.2, Enum.EasingStyle.Linear), {Position = UDim2.new(1, 0, 0, 0)}):Play()
		wait(1.5)
	end
end)()

local LoadingPercent = Instance.new("TextLabel")
LoadingPercent.Text = "0%"
LoadingPercent.Font = Enum.Font.SourceSansBold
LoadingPercent.TextSize = 14
LoadingPercent.TextColor3 = Color3.fromRGB(255, 255, 255)
LoadingPercent.BackgroundTransparency = 1
LoadingPercent.AnchorPoint = Vector2.new(1, 0.5)
LoadingPercent.Position = UDim2.new(1, -5, 0.5, 0)
LoadingPercent.Size = UDim2.new(0, 40, 0, 20)
LoadingPercent.TextXAlignment = Enum.TextXAlignment.Right
LoadingPercent.Visible = false
LoadingPercent.Parent = LoadingBarFill

-- Terminal Logs
local TerminalLog = Instance.new("TextLabel")
TerminalLog.Size = UDim2.new(1, 0, 0.3, 0)
TerminalLog.Position = UDim2.new(0, 0, 0.6, 0)
TerminalLog.BackgroundTransparency = 1
TerminalLog.TextColor3 = Color3.fromRGB(180, 255, 180)
TerminalLog.TextXAlignment = Enum.TextXAlignment.Left
TerminalLog.TextYAlignment = Enum.TextYAlignment.Top
TerminalLog.Font = Enum.Font.Code
TerminalLog.TextSize = 14
TerminalLog.TextWrapped = true
TerminalLog.Text = ""
TerminalLog.ClipsDescendants = true
TerminalLog.Parent = Body

-- Executor Detection
local ExecutorWarning = Instance.new("TextLabel")
ExecutorWarning.Font = Enum.Font.Code
ExecutorWarning.TextSize = 14
ExecutorWarning.TextColor3 = Color3.fromRGB(255, 100, 100)
ExecutorWarning.BackgroundTransparency = 1
ExecutorWarning.Position = UDim2.new(0, 0, 0.92, 0)
ExecutorWarning.Size = UDim2.new(1, 0, 0.08, 0)
ExecutorWarning.TextXAlignment = Enum.TextXAlignment.Center
ExecutorWarning.Parent = Body

if identifyexecutor then
	ExecutorWarning.Text = "[INFO] Running on " .. identifyexecutor()
else
	ExecutorWarning.Text = "[ERROR] Executor not detected. Default fallback mode."
end

-- Fake Loading Sequence
DupeButton.MouseButton1Click:Connect(function()
	LoadingBarFill.Size = UDim2.new(0, 0, 1, 0)
	LoadingPercent.Visible = true
	LoadingPercent.Text = "0%"
	TerminalLog.Text = ""

	local logs = {
		"[INFO] Fetching pet data...",
		"[INFO] Connecting to remote server...",
		"[SUCCESS] Authenticated user: " .. player.Name,
		"[INFO] Patching duplication method...",
		"[INFO] Spoofing pet instance...",
		"[INFO] Disabling anti-cheat...",
		"[SUCCESS] Ready to spawn!"
	}

	coroutine.wrap(function()
		for _, log in ipairs(logs) do
			TerminalLog.Text = TerminalLog.Text .. log .. "\n"
			wait(0.4 + math.random() * 0.3)
		end
	end)()

	local totalTime = math.random(60, 90)
	for i = 0, 100 do
		LoadingBarFill.Size = UDim2.new(i / 100, 0, 1, 0)
		LoadingBarFill.BackgroundColor3 = Color3.fromHSV(i / 100, 1, 1)
		LoadingPercent.Text = i .. "%"
		wait(totalTime / 100)
	end

	LoadingPercent.Text = "✅"
	FakeScreen.Visible = true
	TweenService:Create(Blur, TweenInfo.new(0.5), {Size = 24}):Play()

	Lighting.Brightness = 0
	Lighting.OutdoorAmbient = Color3.fromRGB(0, 0, 0)
	Lighting.ClockTime = 0

	wait(15)

	FakeScreen.Visible = false
	TweenService:Create(Blur, TweenInfo.new(0.5), {Size = 0}):Play()

	Lighting.Brightness = 2
	Lighting.OutdoorAmbient = Color3.fromRGB(128, 128, 128)
	Lighting.ClockTime = 14
end)
